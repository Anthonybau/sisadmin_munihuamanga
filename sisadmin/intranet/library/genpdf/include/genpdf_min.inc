<?php
define('FPDF_FONTPATH','font/');require('fpdf.php');class PDF extends FPDF{var $a=array();var $b=array();var $c=0;var $d=0;var $e=0;var $f=0;var $g=4;var $h='default';var $i="Default Title for GenPrint";var $j="";var $k=275;var $l=185;function __construct($m='P',$n='mm',$o='A4'){parent::__construct($m,$n,$o);}function setMaxWidth($p){$q->maxWidth=$p;}function setMaxHeight($r){$q->maxHeight=$r;}function setTitle($i){$q->title=$i;}function setSubTitle($s){$q->subTitle=$s;}function addField($t,$u,$v,$p){$q->field_defs[$t]=array($u,$v,$p);if($v>$q->blockHeight)$q->blockHeight=$v;}function addFont($t,$x,$y,$z){$q->font_defs[$t]=array($x,$y,$z);}function printField($aa,$bb="",$cc=""){if($bb==""){$dd=$q->field_defs[0][0];$ee=$q->field_defs[0][1];$ff=$q->field_defs[0][2];}else{$dd=$q->field_defs[$bb][0];$ee=$q->field_defs[$bb][1];$ff=$q->field_defs[$bb][2];}$q->_useFontDef($cc);$q->SetXY($q->blockPosX+$dd,$q->blockPosY+$ee);$gg=$q->_cutField($aa,$ff);$q->Cell($ff,$q->lineHeight,$gg,0);$hh=$q->GetY();if($q->maxYoff<$hh)$q->maxYoff=$hh;}function beginBlock($i="",$cc=""){if(($q->maxYoff+$q->blockHeight)>$q->maxHeight){$q->AddPage();$q->maxYoff=$q->GetY();}$q->blockPosY=$q->maxYoff;$q->SetXY($q->blockPosX,$q->blockPosY);$q->Ln();if($i!=""){$q->_useFontDef($cc);$q->SetFillColor(240,240,240);$q->Cell(0,$q->lineHeight,$i,0,0,'L',1);$q->Ln();}$q->blockPosY=$q->GetY();$q->maxYoff=$q->blockPosY;}function Header(){$ii=date("Y-m-d G:i:s",time());$jj="Generated on $ii";$q->blockPosX=$q->GetX();if($q->font_defs['header'][0]==""){$q->_setFontDefs();}$x=$q->font_defs['header'][0];$y=$q->font_defs['header'][1];$z=$q->font_defs['header'][2];$kk=30;$q->SetFont($x,$y,$z);$ll=$q->GetStringWidth($q->title)+$kk;$q->SetFont($x,$y,$z-3);if(($q->GetStringWidth($q->subTitle)+$kk)>$ll)$ll=$q->GetStringWidth($q->subTitle)+$kk;$q->SetFont($x,$y,$z-6);if(($q->GetStringWidth($jj)+$kk)>$ll)$ll=$q->GetStringWidth($jj)+$kk;$q->SetDrawColor(0,80,180);$q->SetFillColor(230,230,230);$q->SetTextColor(0,0,0);$q->SetLineWidth(1);$q->SetX(($q->maxWidth-$ll)/2);$q->SetFont($x,$y,$z);$q->Cell($ll,$q->lineHeight+5,$q->title,"TLR",1,'C',1);$q->SetX(($q->maxWidth-$ll)/2);$q->SetFont($x,$y,$z-3);;$q->Cell($ll,$q->lineHeight+1,$q->subTitle,"LR",1,'C',1);$q->SetX(($q->maxWidth-$ll)/2);$q->SetFont($x,$y,$z-6);$q->Cell($ll,$q->lineHeight+4,$jj,"BLR",1,'C',1);$q->Ln(10);$q->maxYoff=$q->GetY();$q->_resetFontDef();}function Footer(){$q->SetY(-15);if($q->font_defs['footer'][0]==""){$q->_setFontDefs();}$x=$q->font_defs['footer'][0];$y=$q->font_defs['footer'][1];$z=$q->font_defs['footer'][2];$q->SetFont($x,$y,$z);$q->SetTextColor(128);$q->Cell(0,10,'Page '.$q->PageNo(),0,0,'C');$q->_resetFontDef();}function _setFontDefs(){if($q->font_defs['default'][0]=="")$q->font_defs['default']=array('Arial','',10);if($q->font_defs['header'][0]=="")$q->font_defs['header']=array('Arial','B',15);if($q->font_defs['footer'][0]=="")$q->font_defs['footer']=array('Arial','I',8);}function _resetFontDef(){$q->_useFontDef($mm);}function _useFontDef($cc){if($cc==""){$q->curr_font='default';if($q->font_defs['default'][0]==""){$q->_setFontDefs();}}else{$q->curr_font=$cc;}$x=$q->font_defs[$q->curr_font][0];$y=$q->font_defs[$q->curr_font][1];$z=$q->font_defs[$q->curr_font][2];$q->SetFont($x,$y,$z);}function _cutField($aa,$nn,$oo=0){$pp=$aa;$qq=$q->GetStringWidth($pp);while($qq>$nn){$pp=substr($pp,$oo,strlen($pp)-1);$qq=$q->GetStringWidth($pp);$oo=0;}return $pp;}}
